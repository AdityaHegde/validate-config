!function(a,b){"function"==typeof define&&define.amd?define(["jquery","ember"],b):a.Utils=b(a.$)}(this,function(a){var b,c,d;return function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},b=c=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},b._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),d("lib/almond.js",function(){}),d("logger",[],function(){function a(){this.messages=[],this.errors=[],this.warns=[]}var b={Warn:"warns",Error:"errors"};return a.prototype.log=function(a,c,d){var e={type:a,message:c,params:d};this[b[a]].push(e),this.messages.push(e)},a.prototype.warn=function(a,b){this.log("Warn",a,b)},a.prototype.error=function(a,b){this.log("Error",a,b)},a}),d("typeOf",[],function(){return function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}}),d("validators/arrayValidator",["../typeOf"],function(){return{arrayValidator:function(a,b,c){for(var d=0;d<b.length;d++)this.validator(d,b[d],c.elementsValidator);return!0}}}),d("validators/numberValidator",["../typeOf"],function(){return{numberValidator:function(a,b,c){return c.min&&b<c.min||c.max&&b>c.max?(this.logger.error("InvalidValue",{key:a,actualValue:b,validator:c,hierarchyStr:this.hierarchyStr}),!1):!0}}}),d("validators/regexValidator",["../typeOf"],function(){return{regexValidator:function(a,b,c){var d=!0;return c.regex&&(d=!!b.match(c.regex)),d||this.logger.error("InvalidValue",{key:a,actualValue:b,validator:c,hierarchyStr:this.hierarchyStr}),d}}}),d("validators/validator",["../typeOf"],function(){return typeToValidatorMap={object:"objectValidator",array:"arrayValidator",string:"regexValidator",number:"numberValidator",__default__:"regexValidator"},{validator:function(a,b,c){if(this.pushToHierarchy(a,c.parentValidator&&c.parentValidator.placeholderKey||a),this.fullKeysPresent[this.fullHierarchy]=1,this.typeValidator(a,b,c)){var d=typeToValidatorMap[c.type]||typeToValidatorMap.__default__;this[d](a,b,c)}return this.popFromHierarchy(),!0}}}),d("levenshteinDistance",[],function(){var a={},b=function(c,d,e,f,g){var h,i=c+"__"+d+"__"+e+"__"+f;if(a[i])h=a[i].val;else{if(0===d)h=f;else if(0===f)h=d;else{var j=c.charAt(d-1)===e.charAt(f-1)?0:1;h=Math.min(b(c,d-1,e,f,g)+1,b(c,d,e,f-1,g)+1,b(c,d-1,e,f-1,g)+j)}a[i]={val:h}}return h},c=function(a,c){var d;return a>c&&(d=a,a=c,c=d),b(a,a.length,c,c.length)};return c}),d("validators/extraParamsValidator",["../typeOf","../levenshteinDistance"],function(a,b){return{extraParamsValidator:function(a,c,d){var e=[],f=[],g=[];for(var h in d.keys){var i=(h.length,a.length),j=b(h,a);.25*i>=j&&f.push({ld:j,ck:h})}if(e=f.sort(function(a,b){return a.ld-b.ld}).map(function(a){return a.ck}),this.fullKeysSet[a])for(var k=0;k<this.fullKeysSet[a].length;k++){var l=this.replacePlaceholders(this.hierarchy,this.fullKeysSet[a][k]).join(".");this.fullKeysPresent[l]||g.push(l)}return this.logger.warn("ExtraParam",{key:a,val:c,validator:d,hierarchyStr:this.hierarchyStr,matches:e,otherLoc:g}),!0}}}),d("validators/mandatoryParamsValidator",["../typeOf"],function(){return{mandatoryParamsValidator:function(a,b,c){return this.logger.error("MandatoryParamMissing",{key:a,validator:c,hierarchyStr:this.hierarchyStr}),!0}}}),d("validators/objectValidator",["../typeOf"],function(){return{objectValidator:function(a,b,c){var d={};for(var e in b)d[e]=1,c.keys[e]?this.validator(e,b[e],c.keys[e]):(this.pushToHierarchy(e,e),this.extraParamsValidator(e,b[e],c),this.popFromHierarchy());for(var f in c.keys)!d[f]&&c.keys[f].isMandatory&&(this.pushToHierarchy(f,f),this.mandatoryParamsValidator(f,null,c.keys[f]),this.popFromHierarchy());return!0}}}),d("validators/typeValidator",["../typeOf"],function(a){return{typeValidator:function(b,c,d){return a(c)!==d.type?(this.logger.error("InvalidType",{key:b,actualType:a(c),validator:d,hierarchyStr:this.hierarchyStr}),!1):!0}}}),d("validators/main",["./arrayValidator","./numberValidator","./regexValidator","./validator","./extraParamsValidator","./mandatoryParamsValidator","./objectValidator","./typeValidator"],function(){var a={};window.Validators=a;for(var b=0;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}),d("set-validator",[],function(){return{_prepareValidator:function(a){if("object"===a.type)for(var b in a.keys)this.hierarchy.push(b),this._prepareValidator(a.keys[b]),a.keys[b].parentValidator=a,this.fullKeysSet[b]||(this.fullKeysSet[b]=[]),this.fullKeysSet[b].push(this.hierarchy.slice()),this.hierarchy.pop();else"array"===a.type&&(this.hierarchy.push("@"),a.placeholderKey="@",a.elementsValidator.parentValidator=a,this._prepareValidator(a.elementsValidator),this.hierarchy.pop())},setValidator:function(a){this.reset(),this.hierarchy.push("$"),this._prepareValidator(a),this.hierarchy.pop(),this.validatorConfig=a}}}),d("hierarchy",[],function(){return{replacePlaceholders:function(a,b){for(var c=b.slice(),d=0,e=0;d<a.length&&e<this.hierarchyPlaceholders.length;d++)if(d===this.hierarchyPlaceholders[e].index){if(c[d]!==this.hierarchyPlaceholders[e].placeholder)break;c[d]=a[d],e++}else if(a[d]!==c[d])break;return c},pushToHierarchy:function(a,b){this.hierarchyStr=this.hierarchy.join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.join("."),a!==b&&this.hierarchyPlaceholders.push({placeholder:b,index:this.hierarchyPlaceholder.length}),this.hierarchy.push(a),this.hierarchyPlaceholder.push(b),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")},popFromHierarchy:function(){this.hierarchyPlaceholders.length>0&&this.hierarchyPlaceholders[this.hierarchyPlaceholders.length-1].index===this.hierarchyPlaceholder.length-1&&this.hierarchyPlaceholders.pop(),this.hierarchy.pop(),this.hierarchyPlaceholder.pop(),this.hierarchyStr=this.hierarchy.slice(0,-1).join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.slice(0,-1).join("."),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")}}}),d("validate-config",["./logger","./validators/main","./set-validator","./hierarchy"],function(a){function b(a){a?this.setValidator(a):this.reset()}b.prototype.reset=function(){this.hierarchy=[],this.hierarchyPlaceholder=[],this.hierarchyPlaceholders=[],this.logger=new a,this.fullKeysPresent={},this.fullKeysSet={}},b.prototype.validate=function(a){this.validator("$",a,this.validatorConfig)};for(var c=1;c<arguments.length;c++)for(var d in arguments[c])b.prototype[d]=arguments[c][d];return window.ValidateConfig=b,b}),d("jquery",function(){return a}),d("ember",function(){return Ember}),c("ember-utils-core")});